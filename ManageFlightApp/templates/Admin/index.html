{% extends 'admin/master.html' %}

{% block body %}

        {% if not current_user.is_authenticated %}
            <div class="container">
                <h1 class="text-center">LOGIN</h1>
                <form method="post" action="{{ url_for('sign_admin') }}">
                    <div class="form-group">
                        <input type="text" name="username" class="form-control" placeholder="Enter username..." />
                    </div>
                    <div class="form-group">
                        <input type="password" name="password" class="form-control" placeholder="Enter password..." />
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Login" class="btn btn-danger" />
                    </div>
                </form>
            </div>
        {% else %}
            <div class="row">
                        <div class="col-md-6">
                            <table class="table">
                                <tr>
                                    <td>Tên tuyến bay</td>
                                     <td>Số lượt bay </td>
                                </tr>
                                {% for c in FlightStates %}
                                <tr>
                                    <td> {{ c[0] }}</td>
                                    <td> {{ c[1] }} </td>
                                </tr>
                                {% endfor %}
                            </table>
                        </div>
                        <div class="col-md-6">
                            <div>
                                <canvas id="myChart"></canvas>
                            </div>
                        </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                  window.onload = function(){
                             const ctx = document.getElementById('myChart').getContext('2d')
                             let data = []
                             let labels = []
                             let r, g, b
                             let colors = []
                             let borderColors = []
                             {% for c in FlightStates %}
                                        labels.push('{{ c[0] }}')
                                        data.push({{ c[1] }})
                                         r = Math.random()*255
                                         g = Math.random()*255
                                         b = Math.random()*255
                                         colors.push(`rgba(${r}, ${g}, ${b}, 0.2)`)
                                         borderColors.push(`rgba(${r}, ${g}, ${b}, 0.2)`)
                             {% endfor %}
                             new Chart(ctx, {
                                            type: 'bar',
                                            data: {
                                                      labels: labels,
                                                      datasets: [{
                                                        label: '# of Votes',
                                                        data: data,
                                                        borderWidth: 1,
                                                        backgroundColor: colors,
                                                        borderColor:  borderColors
                                                      }]
                                            },
                                            options:{

                                                      scales: {
                                                        y: {
                                                          beginAtZero: true
                                                        }
                                                      }

                                            }
                             });
                      }
            </script>
        {% endif %}

{% endblock %}